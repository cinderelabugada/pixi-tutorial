<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tutorial PixiJS</title>
  <style>* {padding: 0; margin: 0}</style>
  <script src="pixi/pixi.min.js"></script>
</head>
<body>
  <!-- script src="./index.js"></script -->
  <script>
    // Extrai as sub propriedades reduzindo o nome das chamadas 
    let Application = PIXI.Application,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        Sprite = PIXI.Sprite,
        TextureCache = PIXI.utils.TextureCache,
        Rectangle = PIXI.Rectangle

    //Create a Pixi Application
    let app = new PIXI.Application({ 
      width: 256, 
      height: 256,                       
      antialias: true, 
      transparent: false, 
      resolution: 1
    });

    //Add the canvas that Pixi automatically created for you to the HTML document

    // load an image and run the `setup` function when it's done

    /* Renderiza apenas um sprite
    loader
      .add("images/arara.png")
      .load(setup);
    */
    //This `setup` function will run when the image has loaded
    function setup() {

      //Create the cat sprite
      let sprite = new Sprite(resources["images/arara.png"].texture);
      
      sprite.width = 64
      sprite.height = 64
      // pixel topo esquerdo
      sprite.position.set(64, 64)

      // porcentagem
      //sprite.scale.set(0.5, 0.5)

      //sprite.anchor.set(0.5, 0.5)

      sprite.pivot.set(32, 32)
      // radianos
      sprite.rotation = 0.6

      //Add the cat to the stage
      app.stage.addChild(sprite);
    }


    // Renderiza sub imagem de tileset (cartela de sprite)
    app.loader.add("images/megaman.png")
        .load(setup2)
    function setup2 () {
      //Create the `tileset` sprite from the texture
      let texture = TextureCache["images/megaman.png"];

      //Create a rectangle object that defines the position and
      //size of the sub-image you want to extract from the texture
      //(`Rectangle` is an alias for `PIXI.Rectangle`)
      // Rectangle(x, y, width, height)
      // x, y -> origem de cada imagem
      // width, height -> de cada sub-imagem
      let rectangle = new Rectangle(168, 168, 56, 56)

      //Tell the texture to use that rectangular section
      texture.frame = rectangle;

      //Create the sprite from the texture
      let megaman = new Sprite(texture);

      //Position the rocket sprite on the canvas
      megaman.x = 56;
      megaman.y = 56;

      //Add the rocket to the stage
      app.stage.addChild(megaman);
      
      //Render the stage   
      app.renderer.render(app.stage);
    }
    document.body.appendChild(app.view);
  </script>
</body>
</html>
